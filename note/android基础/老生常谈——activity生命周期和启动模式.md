### 老生常谈——activity生命周期和启动模式


对于activity的七个声生命周期回调以及四种启动模式，总是被大家翻来覆去的说，甚至说的都有些厌烦了，但这也侧面说明了这部分知识的重要性，谁都不想在面试的时候只说出个一知半解，下面的分析是对阅读《安卓开发艺术探索》第一章后的整理和思考。

#### 一、正常情况下的生命周期分析

先来上一张大家都熟悉的流程图,来复习一遍活动的生命周期

![](http://p0y1qzu73.bkt.clouddn.com/18-3-31/73503926.jpg)


然后来简单说说这七个回调方法

+ **onCreate** : activity被创建时调用，一般在这个方法中进行活动的初始化工作，如设置布局文件、加载数据、绑定控件等。

+ **onStart** : 经历该回调后，activity由不可见变为可见，但此时处于后台可见，还不能和用户进行交互。

+ **onResume** : 已经可见的activity从后台来到前台,可以和用户进行交互。


+ **onPause** : 当用户启动了新的activity,原来的activity不再处于前台,也无法和用户进行交互，并且紧接着就会调用`onStop()`方法，但如果用户这时立刻按返回键回到原activity，就会调用`onResume()`方法让活动重新回到前台。而且在官方文档中给出了说明，不允许在`onPause()`方法中执行耗时操作，因为这会影响到新activity的启动，具体原因我们在后面分析。


+ **onStop** : 这个回调代表了activity由可见变为完全不可见，在这里可以进行一些稍微重量级的操作。需要注意的是，处于`onPause()`和`onStop()`回调后的activity优先级很低，当有优先级更高的应用需要内存时，该应用就会被杀死，那么当再次返回原activity的时候，会重新调用activity的`onCreate()`方法。

+ **onDestroy** : 来到了这个回调，说明activity即将被销毁，应该将资源的回收和释放工作在该方法中执行。

+ **onRestart** : 这个回调代表了activity由完全不可见重新变为可见的过程，当activity经历了`onStop()`回调变为完全不可见后，如果用户返回原activity，便会触发该回调，并且紧接着会触发`onStart()`来使活动重新可见。


想必已经有许多人对这个过程非常熟悉了，下面我们通过一些实际的场景来更加深入的理解一下活动的启动流程。






+ 什么情况下会使activity进入`onPause()`状态而不是`onStop()`



+ 由活动A启动活动B时，活动A的`onPause()`、`onStop()`与活动B的`onCreat()`、`onStart()`、`onResume()`执行顺序是怎样的




#### 二、异常状态下活动的生命周期

















#### 三、活动的启动模式














